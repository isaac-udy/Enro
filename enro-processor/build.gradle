apply plugin: 'java-library'
apply plugin: 'kotlin'
apply plugin: 'kotlin-kapt'
publishJavaModule("dev.enro", "enro-processor")

dependencies {
    implementation deps.kotlin.stdLib

    implementation deps.processing.ksp

    implementation deps.processing.incremental
    kapt deps.processing.incrementalProcessor

    implementation deps.processing.autoService
    kapt deps.processing.autoService

    implementation project(":enro-annotations")
    implementation deps.processing.javaPoet
    implementation deps.processing.kotlinPoet
    implementation deps.processing.kotlinPoet.ksp
}

afterEvaluate {
    tasks.findByName("compileKotlin")
            .dependsOn(":enro-annotations:publishToMavenLocal")
}

sourceCompatibility = "17"
targetCompatibility = "17"